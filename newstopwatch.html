<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <span id="display"></span>
    <button id="startBtn">Start</button>
    <button id="stopBtn">Stop</button>
    <button id="resetBtn">Reset</button>

    <script>
      let startTime;
      let elapsedTime = 0;
      let intervalId;
      let isRunning = false;

      const display = document.getElementById("display");
      const startBtn = document.getElementById("startBtn");
      const stopBtn = document.getElementById("stopBtn");
      const resetBtn = document.getElementById("resetBtn");

      function formatTime(ms) {
        const hours = Math.floor(ms / 3600000);
        const minutes = Math.floor((ms % 3600000) / 60000);
        const seconds = Math.floor((ms % 60000) / 1000);
        const milliseconds = Math.floor(ms % 1000);

        return `${String(hours).padStart(2, "0")}:${String(minutes).padStart(
          2,
          "0"
        )}:${String(seconds).padStart(2, "0")}.${String(milliseconds).padStart(
          3,
          "0"
        )}`;
      }

      function updateDisplay() {
        const currentElapsed = elapsedTime + (Date.now() - startTime);
        display.textContent = formatTime(currentElapsed);
      }

      startBtn.addEventListener("click", () => {
        if (!isRunning) {
          isRunning = true;
          startTime = Date.now();
          intervalId = setInterval(updateDisplay, 10); // Update every 10ms for precision
        }
      });

      stopBtn.addEventListener("click", () => {
        if (isRunning) {
          isRunning = false;
          clearInterval(intervalId);
          elapsedTime += Date.now() - startTime; // Accumulate elapsed time
        }
      });

      resetBtn.addEventListener("click", () => {
        isRunning = false;
        clearInterval(intervalId);
        elapsedTime = 0;
        display.textContent = formatTime(0);
      });

      // Initial display setup
      display.textContent = formatTime(0);
    </script>
  </body>
</html>
